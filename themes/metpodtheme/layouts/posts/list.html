{{ define "main" }}
{{ $dateFormat := default "Jan 2" (index .Site.Params "date_format") }}
{{ $.Scratch.Set "lastYear" ""}}
<div class="container bg-light rounded py-2">
  <h5 class="card card-header bg-info text-dark rounded">Posts</h5>
  {{ range .Pages }}
    {{ $year := .Date.Year }}
    {{ $lastYear := $.Scratch.Get "lastYear"}}
    <div class="row mt-4">
      <div class="d-none d-sm-block col-sm-2 mt-auto offset-sm-2 text-right">
        <time class="post-date" datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" | safeHTML }}">{{ .Date.Format "Jan 2, 2006" }}</time>
      </div>
      <div class="col">
        {{ if ne $year $lastYear }}
          <p class="text-muted mt-5">{{ $year }}</p>
          {{ $.Scratch.Set "lastYear" $year }}
        {{ end }}
        <a class="text-body" href="{{ .Permalink }}">{{ if .Draft }}DRAFT: {{end}}{{ .Title | markdownify }}</a>
      </div>
    </div>
  {{ end }}
  <br><br>
</div>
{{ end }}
